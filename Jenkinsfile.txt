pipeline {
  agent any
  stages {

    stage('Production-deployment') {
      when {
        branch 'main' 
      }
      steps {
        script {
          // Adding a manual approval step with Yes and No options
          def userInput = input(
            message: 'Do you want to approve the deployment?',
            parameters: [
              choice(name: 'Approval', choices: ['Yes', 'No'], description: 'Approve or cancel the production deployment')
            ]
          )

          // Logic to handle the user input
          if (userInput == 'Yes') {
            echo "User approved the deployment. Proceeding with production deployment."

            sh """
              echo "Its success"
            """
          } else {
            echo "User did not approve the deployment. Skipping production deployment."
          }
        }
      }
    }
  }
}
